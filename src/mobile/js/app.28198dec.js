(function(t){function e(e){for(var a,s,r=e[0],c=e[1],l=e[2],u=0,h=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&h.push(n[s][0]),n[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(h.length)h.shift()();return o.push.apply(o,l||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],a=!0,r=1;r<i.length;r++){var c=i[r];0!==n[c]&&(a=!1)}a&&(o.splice(e--,1),t=s(s.s=i[0]))}return t}var a={},n={app:0},o=[];function s(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=a,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(i,a,function(e){return t[e]}.bind(null,a));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0cb8":function(t,e,i){},"2fcc":function(t,e,i){"use strict";var a=i("cbca"),n=i.n(a);n.a},"3b01":function(t,e,i){"use strict";var a=i("0cb8"),n=i.n(a);n.a},"425b":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),n=i("5530"),o=i("a925");a["a"].use(o["a"]);var s={en:Object(n["a"])({},i("995e")["default"],{help:{howto:["Take a selfie and appear in the collage!","The photo collage is created with pictures of the audience.","You can download your pictures to share them on social media."]},steps:[{main:"Take a selfie and appear in the collage!",button:["Take selfie"],description:"The photo collage is created with pictures of the audience.",gallery:"Your Selfies",galleryDescription:"Download your pictures to share them on social media."},{main:"",button:["Send to collage","Sending...","Cancel","Done"],description:""},{main:"Nice Selfie! Your photo will appear in the collage soon.",button:["Take a new selfie"],description:""}]}),it:Object(n["a"])({},i("ace1")["default"],{help:{howto:["Scatta un selfie per farlo apparire sul grande schermo!","Il collage verrà composto da immagini del pubblico e mostrato durante l'evento.","Puoi anche scaricare le tue immagini per condividerle sui social media."]},steps:[{main:"Scatta un selfie per farlo apparire sul grande schermo!",button:["Scatta un selfie"],description:"Il collage di foto verrà mostrato durante l'evento.",gallery:"Le tue foto",galleryDescription:"Scarica le immagini per condividerle sui social media."},{main:"",button:["Invia al collage","Caricamento...","Cancella","Fatto"],description:""},{main:"Nice Shot! La tua foto apparirà presto sul grande schermo.",button:["Scatta di nuovo"],description:""}]}),sv:Object(n["a"])({},i("dc1b")["default"],{help:{howto:["Tag en selfie för att synas i kollaget!","Fotokollaget skapas av bilder från publiken.","Du kan ladda ned dina bilder och dela dem på sociala media."]},steps:[{main:"Ta en selfie för att synas på den stora skärmen!",button:["Ta selfie"],description:"Fotokollaget visas på den stora skärmen på eventet",gallery:"Dina selfies",galleryDescription:"Ladda ned dina bilder för att dela dem på sociala media."},{main:"",button:["Skicka till kollage","Skickar...","Avbryt","Gjort"],description:""},{main:"Fin selfie! Ditt foto kommer synas i kollaget snart.",button:["Ta en till selfie"],description:""}]}),de:Object(n["a"])({},i("3af3")["default"],{help:{howto:["Mache ein Selfie und erscheine in der Collage!","Die Fotocollage wird aus Bildern des Publikums erstellt.","Du kannst deine Bilder herunterladen, um sie in deinen Sozialen Medien zu teilen."]},steps:[{main:"Mache ein Selfie und erscheine auf der großen Leinwand!",button:["Mache ein Selfie"],description:"Die Fotocollage erscheint auf der Leinwand im Veranstaltungsort.",gallery:"Deine Selfies",galleryDescription:"Lade deine Bilder herunter, um sie in Sozialen Medien zu teilen."},{main:"",button:["Zur Collage senden","Wird gesendet...","Abbrechen","Fertig"],description:""},{main:"Perfekt getroffen! Dein Foto erscheint in der Collage in Kürze!",button:["Mache ein neues Selfie"],description:""}]}),da:Object(n["a"])({},i("f5f8")["default"],{help:{howto:["Tag en selfie og dukk op i collagen!","Fotocollagen er oprettet med billeder af publikum.","Du kan downloade dine billeder for at dele dem på sociale medier."]},steps:[{main:"Tag en selfie og dukk op i collagen!",button:["Tag selfie"],description:"Fotocollagen er oprettet med billeder af publikum.",gallery:"Dine selfies",galleryDescription:"Download dine billeder for at dele dem på sociale medier."},{main:"",button:["Send til collage","Afsendelse...","Annuller","Hecho"],description:""},{main:"Dejlig selfie! Dit billede vises snart i collagen.",button:["Tag en ny selfie"],description:""}]}),fr:Object(n["a"])({},i("5cfe")["default"],{help:{howto:["Prenez un selfie et apparaissez dans le collage!","Le collage photo est créé avec des images du public.","Vous pouvez télécharger vos photos pour les partager sur les réseaux sociaux."]},steps:[{main:"Prenez un selfie et apparaissez dans le collage!",button:["Prenez un selfie"],description:"Le collage photo est créé avec des images du public.",gallery:"Vos selfies",galleryDescription:"Téléchargez vos photos pour les partager sur les réseaux sociaux."},{main:"",button:["Envoyer au collage","Envoi en cours...","Annuler","Fait"],description:""},{main:"Jolie photo! Votre photo apparaîtra bientôt dans le collage.",button:["Prenez un nouveau selfie"],description:""}]}),es:Object(n["a"])({},i("3bce")["default"],{help:{howto:["¡Hazte una selfie y aparece en el collage!","El collage de fotos se crea con imágenes de la audiencia.","Puede descargar sus imágenes para compartirlas en las redes sociales."]},steps:[{main:"¡Hazte una selfie y aparece en el collage!",button:["Tomar selfie"],description:"El collage de fotos se crea con imágenes de la audiencia.",gallery:"Tus selfies",galleryDescription:"Descarga tus imágenes para compartirlas en las redes sociales."},{main:"",button:["Enviar a collage","Enviando...","Cancelar","Hecho"],description:""},{main:"¡Bonito Selfie! Tu foto aparecerá en el collage pronto.",button:["Toma una nueva selfie"],description:""}]})},r=new o["a"]({locale:"en",fallbackLocale:"en",messages:s}),c=r,l=i("d655"),d=i.n(l),u=(i("4c3c"),i("362d")),h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-component",attrs:{id:"app"}},[i("div",{staticClass:"app-background",style:t.background}),i("div",{staticClass:"img-uploader-wrap",staticStyle:{display:"none"}},[i("input",{ref:"uploader",attrs:{type:"file",name:"uploader",id:"uploader",accept:"image/*",capture:"user"},on:{change:function(e){return t.handleOnChange(e)}}})]),i("div",{staticClass:"inner"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isHelpVisible,expression:"isHelpVisible"}],staticClass:"help-section"},[i("sc-help-popup",{ref:"helpPopup",attrs:{share:t.shareUrl,howto:t.getHowto,options:t.getHelpOptions}}),t.custom.ctaEnabled?i("cta-popup",{ref:"ctaPopup",attrs:{cta:t.custom.cta,storekey:t.createdTimestamp,bundle:t.appState.momentClass.bundle}}):t._e()],1),t.isVisible("intro")?i("intro-page",{attrs:{fallback:!t.view.mediaSupported,boxTitle:t.custom.introTitle,boxImg:t.custom.introImg,boxDescription:t.custom.introDescription}}):t._e(),t.isVisible("camera")?i("take-picture",{on:{pictureTaken:function(e){return t.handlePictureTaken(e)}}}):t._e(),t.isVisible("customize")?i("customize-picture",{attrs:{userTakenPicture:t.img,filterUrl:t.custom.filter,boxButton:t.custom.sendButton},on:{upload:function(e){return t.handleUpload(e)}}}):t._e(),t.isVisible("summary")?i("upload-success",{attrs:{fallback:!t.view.mediaSupported,boxTitle:t.custom.successMessage}}):t._e(),t.isVisible("summary","intro")?i("content-gallery",{attrs:{content:t.appState.content}}):t._e(),t.showSponsors?i("sponsor-banner",{attrs:{sponsors:t.sponsors}}):t._e()],1)])},p=[],m=(i("4de4"),i("caad"),i("d81d"),i("0d03"),i("c0b6"),i("d3b7"),i("2532"),i("3ca3"),i("ddb0"),i("4795"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box-positioner"},[a("div",{staticClass:"box"},[a("div",{staticClass:"box-body text-center"},[a("h1",{staticClass:"mainText"},[t._v(t._s(t.boxTitle?t.boxTitle:t.t("steps.0.main")))]),t.boxImg?a("img",{staticClass:"box-img",attrs:{src:t.boxImg,alt:"Collage"}}):a("img",{staticClass:"box-img",attrs:{src:i("be97"),alt:"Collage"}})]),a("div",{staticClass:"box-footer"},[a("button",{staticClass:"btn openCameraBtn",on:{click:function(e){return t.goToCamera(e)}}},[a("img",{attrs:{src:"./assets/icons/camera-"+t.view.theme+".icon.svg",alt:""}}),a("span",{},[t._v(t._s(t.t("steps.0.button.0")))])]),a("div",{staticClass:"infoText"},[t._v(t._s(t.boxDescription?t.boxDescription:t.t("steps.0.description")))])])])])}),g=[];i("4160"),i("277d"),i("13d5"),i("a434"),i("c19f"),i("ace4"),i("b64b"),i("ac1f"),i("1276"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("159b"),i("2b3d"),i("53ca");function f(t){return Array.isArray(t)&&!!t.length}function v(t){Object.keys(t).forEach((function(e){document.documentElement.setAttribute(e,t[e])}))}function b(t,e,i,a,n,o,s,r){2===arguments.length&&(i=a=0,n=t.canvas.width,o=t.canvas.height),s="number"===typeof s?s:.5,r="number"===typeof r?r:.5,s<0&&(s=0),r<0&&(r=0),s>1&&(s=1),r>1&&(r=1);var c,l,d,u,h=e.videoWidth,p=e.videoHeight,m=Math.min(n/h,o/p),g=h*m,f=p*m,v=1;g<n&&(v=n/g),Math.abs(v-1)<1e-14&&f<o&&(v=o/f),g*=v,f*=v,d=h/(g/n),u=p/(f/o),c=(h-d)*s,l=(p-u)*r,c<0&&(c=0),l<0&&(l=0),d>h&&(d=h),u>p&&(u=p),t.drawImage(e,c,l,d,u,i,a,n,o)}function w(t){for(var e=atob(t.split(",")[1]),i=t.split(",")[0].split(":")[1].split(";")[0],a=new ArrayBuffer(e.length),n=new Uint8Array(a),o=0;o<e.length;o++)n[o]=e.charCodeAt(o);var s=new Blob([a],{type:i});return s}function x(t,e){EXIF.getData(t,(function(){var i=document.createElement("canvas"),a=i.getContext("2d"),n=new Image,o=this;n.onload=function(){if("imageOrientation"in n.style)i.width=n.width,i.height=n.height,a.save();else{var t=EXIF.getTag(o,"Orientation");i.width=n.width,i.height=n.height,a.save();var s=i.width,r=i.style.width,c=i.height,l=i.style.height;if(t&&!("imageOrientation"in n.style))switch(t>4&&t<9&&(i.width=c,i.style.width=l,i.height=s,i.style.height=r),t){case 2:a.translate(s,0),a.scale(-1,1);break;case 3:a.translate(s,c),a.rotate(Math.PI);break;case 4:a.translate(0,c),a.scale(1,-1);break;case 5:a.rotate(.5*Math.PI),a.scale(1,-1);break;case 6:a.rotate(.5*Math.PI),a.translate(0,-c);break;case 7:a.rotate(.5*Math.PI),a.translate(s,-c),a.scale(-1,1);break;case 8:a.rotate(-.5*Math.PI),a.translate(-s,0);break}}a.drawImage(n,0,0),a.restore();var d=i.toDataURL("image/jpeg");e(d)},n.src=URL.createObjectURL(t)}))}function y(){var t=navigator.userAgent||navigator.vendor||window.opera;return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))}var C={name:"IntroPage",components:{},props:{boxTitle:String,boxDescription:String,boxImg:String,fallback:Boolean},data:function(){return{isMobile:!1,view:{theme:"light"}}},mounted:function(){this.isMobile=y(),this.view.theme=document.documentElement.getAttribute("theme")},methods:{goToCamera:function(){this.fallback||this.isMobile?this.$root.$emit("openNativeCamera",!0):this.$root.$emit("openBrowserCamera",!0)}}},k=C,T=(i("b251"),i("2877")),S=Object(T["a"])(k,m,g,!1,null,"45d35ee4",null),$=S.exports,_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box-container"},[i("div",{staticClass:"video-wrap"},[i("video",{ref:"video",attrs:{id:"video",playsinline:"",autoplay:""}})]),i("div",{staticClass:"controller"},[i("div",{staticClass:"controller-bg"}),i("button",{staticClass:"goback btn btn-small btn-transparent text-white",on:{click:function(e){return t.goBack()}}},[t._v(t._s(t.t("steps.1.button.2")))]),i("button",{attrs:{id:"snap"},on:{click:function(e){return t.capture(e)}}},[i("div",{staticClass:"inner"})])]),i("div",{staticClass:"canvas-positioner"},[i("canvas",{ref:"canvas",attrs:{id:"canvas"}})])])},D=[],E=(i("96cf"),i("1da1")),I={audio:!1,video:{facingMode:["user","environment"],height:window.innerHeight,width:window.innerWidth}},P={name:"TakePicture",components:{},props:{},data:function(){return{}},mounted:function(){this.init(),this.context=this.$refs.canvas.getContext("2d")},methods:{init:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia(I);case 3:i=e.sent,t.handleSuccess(i),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()},goBack:function(){this.$root.$emit("goToIntro",!0)},handleSuccess:function(t){window.stream=t,this.$refs.video.srcObject=t},capture:function(){this.drawImageOnCanvas();var t=this.$refs.canvas.toDataURL("image/jpeg");this.$emit("pictureTaken",t)},drawImageOnCanvas:function(){this.$refs.canvas.width=window.innerWidth,this.$refs.canvas.height=window.innerHeight,this.context.translate(window.innerWidth,0),this.context.scale(-1,1),b(this.context,this.$refs.video,0,0,window.innerWidth,window.innerHeight,.5,.5)}}},M=P,O=(i("3b01"),Object(T["a"])(M,_,D,!1,null,"524919d0",null)),j=O.exports,L=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.content&&t.content.length?i("div",{staticStyle:{padding:"10px 16px 0 16px"}},[i("div",{staticClass:"box"},[i("div",{staticClass:"box-header"},[i("h1",{staticClass:"box-title"},[t._v(t._s(t.t("steps.0.gallery")))]),i("div",{staticClass:"box-description"},[t._v(t._s(t.t("steps.0.galleryDescription")))])]),i("div",{staticClass:"box-body flex"},t._l(t.content,(function(e,a){return i("div",{key:a,staticClass:"user-content"},[i("img",{attrs:{src:e.url,alt:a}}),i("div",{staticClass:"actions"},[i("a",{staticClass:"btn btn-small btn-inverted",attrs:{href:e.url,download:""}},[i("img",{attrs:{src:"./assets/icons/download-"+("light"===t.view.theme?"dark":"light")+".icon.svg",alt:"download"}})])])])})),0)])]):t._e()},A=[],H={name:"ContentGallery",components:{},props:{content:{type:Array,default:function(){return[]}}},data:function(){return{view:{theme:"light"}}},mounted:function(){this.view.theme=document.documentElement.getAttribute("theme")},methods:{}},z=H,U=(i("c169"),Object(T["a"])(z,L,A,!1,null,"3a13cb1a",null)),B=U.exports,K=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"cta-box"},[i("sc-popup-overlay",{ref:"ctaOverlay",staticClass:"cta-overlay",attrs:{canDismiss:!0}},[t.cta.headerImg?i("div",{staticClass:"header-info",class:{"with-image":t.cta.headerImg}},[i("img",{attrs:{src:t.cta.headerImg,alt:""}})]):t._e(),i("div",{staticClass:"bottom-padder"},[i("div",{staticClass:"moment-infos"},[t.cta.title?i("div",{staticClass:"cta-headline"},[t._v(" "+t._s(t.cta.title)+" ")]):t._e(),t.cta.description?i("div",{staticClass:"cta-text"},[t._v(" "+t._s(t.cta.description)+" ")]):t._e()])]),i("div",{staticClass:"cta-button-overlay"},[i("button",{staticClass:"main-button",on:{click:function(e){return t.handleClick()}}},[t._v(" "+t._s(t.cta.callToAction||"Go to Website")+" "),i("svg",{staticClass:"icon icon-right",attrs:{width:"22",height:"21",viewBox:"0 0 22 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M15.2678 19.1097H1.96743V5.78748H10.6378L12.2757 4.14951H1.13752C0.678891 4.14951 0.307617 4.52078 0.307617 4.97941V19.9396C0.307617 20.3982 0.678891 20.7695 1.13752 20.7695H16.0758C16.5345 20.7695 16.9057 20.3982 16.9057 19.9396V8.80135L15.2678 10.4393V19.1097Z",fill:"var(--btn-text-color-1)"}}),i("path",{attrs:{d:"M20.2473 0H14.2851C13.8265 0 13.4552 0.371274 13.4552 0.829906C13.4552 1.28854 13.8265 1.65981 14.2851 1.65981H18.2599L9.85165 10.0681C9.52406 10.3957 9.52406 10.898 9.85165 11.2256C10.0045 11.3785 10.2229 11.4658 10.4413 11.4658C10.6597 11.4658 10.8563 11.3785 11.031 11.2256L19.4393 2.79547V6.77029C19.4393 7.22892 19.8105 7.60019 20.2692 7.60019C20.7278 7.60019 21.0991 7.22892 21.0991 6.77029V0.829906C21.0772 0.371274 20.706 0 20.2473 0Z",fill:"var(--btn-text-color-1)"}})])])])])],1)},F=[],N=(i("a9e3"),{name:"CtaPopup",components:{},props:{cta:{type:Object,required:!0,default:function(){return{}}},bundle:String,storekey:Number},data:function(){return{}},mounted:function(){},methods:{handleClick:function(){this.trackClick(),window.open(this.cta.redirectUrl,"_blank","noopener,noreferrer"),window.setTimeout(this.hide.bind(this),100)},trackClick:function(){var t={category:"engagement",value:1,label:this.cta.redirectUrl,bundle:this.bundle};this.$SDK.analytics.track("cta_click",t)},show:function(){if("true"!==window.sessionStorage.getItem("sc:moment:cta"+this.storekey))window.sessionStorage.setItem("sc:moment:cta"+this.storekey,!0);else if(!this.cta.showAlways)return;this.$refs.ctaOverlay.show()},hide:function(){this.$refs.ctaOverlay.hide()}}}),V=N,W=(i("dc47"),Object(T["a"])(V,K,F,!1,null,"31b1dffc",null)),R=W.exports,q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box-container"},[i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.view.editing,expression:"!view.editing"}],staticClass:"toolbox-container top-tools"},[t.filterUrl?[t.view.filterActive?i("button",{staticClass:"btn btn-small",staticStyle:{width:"68px!important","margin-bottom":"6px"},on:{click:function(e){return t.removeFilter()}}},[i("img",{attrs:{src:"./assets/icons/filter-"+t.view.theme+".icon.svg",alt:""}}),i("img",{staticClass:"close-icon",attrs:{src:"./assets/icons/close.icon.svg",alt:""}})]):i("div",{staticClass:"top-tool-group"},[i("button",{staticClass:"btn btn-small",on:{click:function(e){return t.addFilter()}}},[i("img",{attrs:{src:"./assets/icons/filter-"+t.view.theme+".icon.svg",alt:""}})]),t.view.btnClicked?t._e():i("tooltip",{attrs:{text:"Add a filter on your picture."}})],1)]:t._e(),t.view.textActive?i("button",{staticClass:"btn btn-small",staticStyle:{width:"68px!important"},on:{click:function(e){return t.removeTextLayer()}}},[i("img",{attrs:{src:"./assets/icons/text-"+t.view.theme+".icon.svg",alt:""}}),i("img",{staticClass:"close-icon",attrs:{src:"./assets/icons/close.icon.svg",alt:""}})]):i("div",{staticClass:"top-tool-group"},[i("button",{staticClass:"btn btn-small",on:{click:function(e){return t.addTextLayer()}}},[i("img",{attrs:{src:"./assets/icons/text-"+t.view.theme+".icon.svg",alt:""}})]),t.view.btnClicked?t._e():i("tooltip",{attrs:{text:"Add Text on your picture."}})],1)],2)]),i("transition-group",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.view.editing,expression:"!view.editing"}],key:0,staticClass:"toolbox-bg"}),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.view.editing,expression:"!view.editing"}],key:1,staticClass:"toolbox-container bottom-tools"},[i("button",{staticClass:"btn btn-small btn-transparent text-white",on:{click:function(e){return t.goBack()}}},[t._v(t._s(t.t("steps.1.button.2")))]),t.view.sending?i("button",{staticClass:"btn btn-small"},[t._v(t._s(t.t("steps.1.button.1"))+" "),i("img",{staticClass:"img preloader",attrs:{src:"./assets/icons/loading-"+t.view.theme+".icon.svg",alt:""}})]):i("button",{staticClass:"btn btn-small",on:{click:function(e){return t.upload()}}},[t._v(t._s(t.boxButton?t.boxButton:t.t("steps.1.button.0")))])])]),i("div",{attrs:{id:"container"}}),i("text-edit-modal",{ref:"textEditModal",attrs:{text:t.text}})],1)},X=[],Y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tooltip"},[i("div",{staticClass:"arrow"}),t._v(" "+t._s(t.text)+" ")])},G=[],J={name:"Tooltip",components:{},props:{text:String},data:function(){return{}},mounted:function(){},methods:{}},Z=J,Q=(i("7170"),Object(T["a"])(Z,Y,G,!1,null,"670210c8",null)),tt=Q.exports,et=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"popup"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"popup-overlay"}),i("transition",{attrs:{name:"fade-center"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"popup-container"},[i("div",{staticClass:"popup-box",on:{click:t.hide}},[i("div",{staticClass:"popup-header"},[i("button",{staticClass:"btn btn-small",on:{click:t.hide}},[t._v(" "+t._s(t.t("steps.1.button.3"))+" ")])]),i("div",{staticClass:"popup-content",class:{onfocus:t.textAreaFocused}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textToEdit,expression:"textToEdit"}],ref:"textEdit",staticClass:"textedit",attrs:{autofocus:"",name:"",id:"",cols:"10",rows:"1"},domProps:{value:t.textToEdit},on:{focus:function(e){t.textAreaFocused=!0},blur:function(e){t.textAreaFocused=!1},input:[function(e){e.target.composing||(t.textToEdit=e.target.value)},t.autoResize],click:t.handleClick}})])])])])],1)},it=[],at={name:"TextEditModal",data:function(){return{visible:!1,textToEdit:"",textAreaFocused:!1}},props:{text:String},methods:{show:function(){var t=this;this.visible=!0,this.textToEdit=this.text,this.$emit("show",!0),document.body.style.overflow="hidden",this.$nextTick((function(){return t.$refs.textEdit.focus()}))},hide:function(){this.visible=!1,this.$emit("hide",this.textToEdit),document.body.style.overflow="auto"},handleClick:function(t){t.stopPropagation()},autoResize:function(t){t.target.style.height="auto",t.target.style.height=t.target.scrollHeight+"px"}}},nt=at,ot=(i("ec97"),Object(T["a"])(nt,et,it,!1,null,"46f26ccc",null)),st=ot.exports,rt=a["a"].observable({showTooltips:!0,content:[],months:["january","february","march","april","may","june","july","august","september","october","november","december"]}),ct={ctaDisplayTimeout:2200};var lt=rt,dt={name:"CustomizePicture",components:{Tooltip:tt,TextEditModal:st},props:{userTakenPicture:String,filterUrl:String,boxButton:String},data:function(){return{view:{btnClicked:!1,sending:!1,textActive:!1,filterActive:!1,editing:!1,bgEditingEnabled:!0,theme:"light"},stage:void 0,imgLayer:void 0,textLayer:void 0,text:void 0,filterLayer:void 0,tr:void 0,configKonva:{width:640,height:900}}},created:function(){this.view.theme=document.documentElement.getAttribute("theme")},mounted:function(){var t=this;TouchEmulator(),this.view.btnClicked=!lt.showTooltips,this.$Konva.hitOnDragEnabled=!0,this.$Konva.captureTouchEventsEnabled=!0;var e=new this.$Konva.Stage({container:"container",width:Math.min(500,window.innerWidth),height:Math.min(500,window.innerWidth)});this.stage=e;var i=new this.$Konva.Layer;e.add(i);var a=new Image;a.onload=function(){var e={ratio:a.width/a.height,height:window.innerHeight,y:0};e.width=window.innerHeight*e.ratio,e.x=(Math.min(500,window.innerWidth)-e.width)/2;var n=new t.$Konva.Image({x:e.x,y:e.y,image:a,width:e.width,height:e.height,draggable:!0});i.add(n),i.batchDraw()},a.src=this.userTakenPicture,this.imgLayer=i},methods:{goBack:function(){this.$root.$emit("goToIntro",!0)},upload:function(){var t=this;this.view.sending=!0,this.tr&&this.tr.destroy(),this.stage.toImage({mimeType:"image/jpeg",quality:1,callback:function(e){t.$emit("upload",e)}})},addFilter:function(){var t=this;this.view.btnClicked=!0,lt.showTooltips=!1,this.view.filterActive=!0,this.view.bgEditingEnabled=!1;var e=new this.$Konva.Layer,i=new this.$Konva.Image({x:120,y:120,draggable:!0});this.stage.add(e),e.add(i);var a=new Image;a.crossOrigin="Anonymous",a.onload=function(){i.image(a),e.batchDraw()},a.src=this.filterUrl;var n=new this.$Hammer(e,{domEvents:!0});n.get("rotate").set({enable:!0});var o=0,s=0;e.on("rotatestart",(function(e){e.evt.stopPropagation(),t.view.editing=!0,i.offsetX(i.width()/2),i.offsetY(i.height()/2),o=e.evt.gesture.rotation,s=i.scaleX(),i.stopDrag(),i.draggable(!1)})),e.on("rotate",(function(t){if(t.evt.stopPropagation(),0!==t.evt.gesture.rotation){var a=o-t.evt.gesture.rotation;i.rotate(-a),o=t.evt.gesture.rotation,i.scaleX(s*t.evt.gesture.scale),i.scaleY(s*t.evt.gesture.scale),e.batchDraw()}})),e.on("rotateend rotatecancel",(function(a){a.evt.stopPropagation(),t.view.editing=!1,i.draggable(!0),e.batchDraw()})),i.on("dragstart",(function(){t.view.editing=!0})),i.on("dragend",(function(){t.view.editing=!1})),this.filterLayer=e},removeFilter:function(){this.view.filterActive=!1,this.filterLayer.destroy(),this.filterLayer=null,this.textLayer||(this.view.bgEditingEnabled=!0)},removeTextLayer:function(){this.view.textActive=!1,this.textLayer.destroy(),this.textLayer=null,this.text="",this.filterLayer||(this.view.bgEditingEnabled=!0)},addTextLayer:function(){var t=this;this.view.btnClicked=!0,lt.showTooltips=!1,this.view.bgEditingEnabled=!1;var e=new this.$Konva.Layer;this.stage.add(e);var i=new this.$Konva.Label({x:.5*Math.min(500,window.innerWidth)-110,y:.5*window.innerHeight-30,draggable:!0}),a=new this.$Konva.Text({x:0,y:0,fontSize:30,lineHeight:1.2,fontFamily:"Source Sans Pro",fontStyle:"bold",align:"center",text:"",padding:16,wrap:"word"}),n=new this.$Konva.Tag({cornerRadius:8,fill:"white"});i.add(n),i.add(a),e.add(i);var o=new this.$Hammer(e,{domEvents:!0});o.get("rotate").set({enable:!0});var s=0,r=0;e.on("rotatestart",(function(e){e.evt.stopPropagation(),e.evt.preventDefault(),t.view.editing=!0,i.offsetX(i.width()/2),i.offsetY(i.height()/2),s=e.evt.gesture.rotation,r=i.scaleX(),i.stopDrag(),i.draggable(!1)})),e.on("rotate",(function(t){if(t.evt.stopPropagation(),0!==t.evt.gesture.rotation){var a=s-t.evt.gesture.rotation;i.rotate(-a),s=t.evt.gesture.rotation,i.scaleX(r*t.evt.gesture.scale),i.scaleY(r*t.evt.gesture.scale),e.batchDraw()}})),e.on("rotateend rotatecancel",(function(a){a.evt.stopPropagation(),t.view.editing=!1,i.draggable(!0),e.batchDraw()})),e.on("dragstart",(function(){t.view.editing=!0})),e.on("dragend",(function(){t.view.editing=!1})),this.textLayer=e,this.view.textActive=!0,e.on("click tap pressup",(function(){var n=a.width();t.text=a.text(),i.hide(),e.draw(),t.$refs.textEditModal.show(),t.$refs.textEditModal.$on("hide",(function(o){t.$refs.textEditModal.$off("hide"),t.text=o,a.text(o),a.width(n),i.show(),e.draw()}))})),i.hide(),this.$refs.textEditModal.show(),this.$refs.textEditModal.$on("hide",(function(n){t.$refs.textEditModal.$off("hide"),n?(t.text=n,a.text(n),a.width(Math.min(a.width(),Math.min(500,window.innerWidth)-16)),i.x((Math.min(500,window.innerWidth)-a.width())/2),i.y((window.innerHeight-a.height())/2),i.show(),e.draw()):t.removeTextLayer()})),e.batchDraw()}}},ut=dt,ht=(i("a89b"),Object(T["a"])(ut,q,X,!1,null,"79c4d2b4",null)),pt=ht.exports,mt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box-positioner"},[i("div",{staticClass:"box"},[i("div",{staticStyle:{"text-align":"center"}},[i("div",{attrs:{id:"circularLogo"}}),i("h1",{staticClass:"mainText"},[t._v(t._s(t.boxTitle?t.boxTitle:t.t("steps.2.main")))])]),i("button",{staticClass:"btn btn-green",staticStyle:{"margin-top":"60px","flex-shrink":"0"},on:{click:function(e){return t.goToCamera()}}},[i("img",{attrs:{src:"./assets/icons/camera-light.icon.svg",alt:""}}),i("span",[t._v(t._s(t.t("steps.2.button.0")))])])])])},gt=[],ft={name:"UploadSuccess",components:{},props:{fallback:Boolean,boxTitle:String},data:function(){return{isMobile:!1,view:{theme:"light"}}},mounted:function(){this.isMobile=y(),this.$root.$emit("showCtaPopup",!0)},methods:{goToCamera:function(){this.fallback||this.isMobile?this.$root.$emit("openNativeCamera",!0):this.$root.$emit("openBrowserCamera",!0)}}},vt=ft,bt=(i("9be1"),Object(T["a"])(vt,mt,gt,!1,null,"7522fa01",null)),wt=bt.exports,xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.sponsors.hasSponsors?i("div",{staticClass:"sponsor-banner"},[i("p",[t._v(t._s(t.sponsors.credit))]),i("div",{staticClass:"logo-container"},t._l(t.sponsors.logos,(function(t,e){return i("img",{key:e,attrs:{src:t,alt:e}})})),0)]):t._e()},yt=[],Ct={name:"SponsorBanner",data:function(){return{hasSponsors:!1}},props:{sponsors:{type:Object,required:!0,default:function(){return{hasSponsors:!1,credit:"",logos:[]}}}}},kt=Ct,Tt=(i("2fcc"),Object(T["a"])(kt,xt,yt,!1,null,"6c7cbe7c",null)),St=Tt.exports,$t={name:"App",components:{IntroPage:$,TakePicture:j,ContentGallery:B,CtaPopup:R,CustomizePicture:pt,UploadSuccess:wt,SponsorBanner:St},created:function(){this.$SDK.onConfigReceived(this.initialize)},data:function(){return{view:{loading:!0,pageName:"",theme:"light",mediaSupported:!1},shareUrl:void 0,sponsors:void 0,ctaTimeout:void 0,createdTimestamp:void 0,custom:{},appState:lt}},mounted:function(){this.$root.$on("goToIntro",this.handleGoBack.bind(this)),this.$root.$on("showCtaPopup",this.handleCTAPopup.bind(this)),this.$root.$on("openNativeCamera",this.openNativeCamera.bind(this)),this.$root.$on("openBrowserCamera",this.openBrowserCamera.bind(this))},computed:{background:function(){return{backgroundColor:this.custom.backgroundColor}},showSponsors:function(){return this.sponsors&&this.sponsors.hasSponsors&&("intro"===this.view.pageName||"summary"===this.view.pageName)},isHelpVisible:function(){return"intro"===this.view.pageName||"summary"===this.view.pageName},getHowto:function(){return this.$t("help.howto")},getHelpOptions:function(){return{title:"Collage",headerImg:this.custom.helpHeaderImg}}},methods:{initialize:function(){var t=this;Promise.all([this.$SDK.connection.getMomentClass(),this.$SDK.connection.getMoment()]).then((function(t){return{momentClass:t[0],moment:t[1]}})).then((function(e){var i=e.momentClass,a=e.moment,n=void 0===a?{}:a;t.shareUrl=i.shareUrl,t.appState.momentClass=i,t.createdTimestamp=n.created,t.checkMediaSupport(),t.handleMomentClass(i),t.initTheme(i),t.initLanguage(i),t.initSponsors(i),t.initTakenPictures(),t.showPage("intro")}))["catch"]((function(t){console.error(t)}))},checkMediaSupport:function(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(this.view.mediaSupported=!0)},handleMomentClass:function(t){var e=t.custom||{};f(e.filters)?e.filter=this.getImageUrl(e.filters[0]):e.filter=null,f(e.helpHeaderImg)?e.helpHeaderImg=this.getImageUrl(e.helpHeaderImg[0]):e.helpHeaderImg=null,f(e.introImg)?e.introImg=this.getImageUrl(e.introImg[0]):e.introImg=null,e.cta?e.ctaEnabled&&f(e.cta.headerImg)?e.cta.headerImg=this.getImageUrl(e.cta.headerImg[0]):e.cta.headerImg=null:(e.ctaEnabled=!1,e.cta={}),this.custom=e},initSponsors:function(t){var e=this,i=Object.assign({},t);this.sponsors={},i.showSponsor&&i.sponsor&&i.sponsor.logos&&i.sponsor.logos.length>0&&(this.sponsors.hasSponsors=!0,this.sponsors.logos=i.sponsor.logos.map((function(t){return e.getImageUrl(t)})),this.sponsors.credit=i.sponsor.credit)},initTakenPictures:function(){var t=this;this.$SDK.connection.getUserContentInfo({tag:this.$SDK.getMomentClassId(),uploaders:"me"}).then((function(e){t.appState.content=e}))["catch"]((function(e){t.appState.content=null}))},initTheme:function(t){var e=t.custom;e.theme&&v({theme:e.theme})},initLanguage:function(t){var e=t.language;this.$i18n.locale=e||"en",v({lang:this.$i18n.locale})},handlePictureTaken:function(t){this.img=t,this.showPage("customize")},getImageUrl:function(t){return t?this.$SDK.connection.getContentCdnLocation(t):""},isVisible:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.includes(this.view.pageName)},showPage:function(t){this.view.pageName=t},openNativeCamera:function(){this.$refs.uploader.click()},openBrowserCamera:function(){this.showPage("camera")},handleGoBack:function(){this.showPage("intro")},handleOnChange:function(t){var e=this,i=t.dataTransfer?t.dataTransfer.files:t.target.files;i[0]&&x(i[0],(function(t){var i=t;e.handlePictureTaken(i)}))},handleUpload:function(t){var e=this,i=new Date,a={file:new File([w(t.src)],(new Date).toUTCString()),type:"image/jpeg",tags:["everyone",this.$SDK.getMomentClassId(),i.getTime(),lt.months[i.getMonth()]]};this.$SDK.connection.uploadContent(a).then((function(t){e.appState.content||(e.appState.content=[]),e.appState.content.unshift({url:e.$SDK.connection.getContentCdnLocation(t.data.id)}),e.showPage("summary")}))["catch"]((function(t){return console.error(t)}))},handleCTAPopup:function(){var t=this;this.custom.ctaEnabled&&this.custom.cta&&(this.custom.cta.showAlways||"true"!==window.sessionStorage.getItem("sc:moment:cta"+this.createdTimestamp))&&(window.clearTimeout(this.ctaTimeout),this.ctaTimeout=window.setTimeout((function(){t.$refs.ctaPopup.show()}),ct.ctaDisplayTimeout))}}},_t=$t,Dt=(i("5c0b"),Object(T["a"])(_t,h,p,!1,null,null,null)),Et=Dt.exports;a["a"].config.productionTip=!1,a["a"].use(d.a,{i18n:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c.t(t,e)}}),window.Stagecast&&(a["a"].prototype.$SDK=new window.Stagecast,a["a"].prototype.$Konva=u,a["a"].prototype.$Hammer=Hammer,new a["a"]({i18n:c,render:function(t){return t(Et)}}).$mount("#app"))},"5c0b":function(t,e,i){"use strict";var a=i("9c0c"),n=i.n(a);n.a},7170:function(t,e,i){"use strict";var a=i("9de3"),n=i.n(a);n.a},"9be1":function(t,e,i){"use strict";var a=i("b0b6"),n=i.n(a);n.a},"9c0c":function(t,e,i){},"9de3":function(t,e,i){},a89b:function(t,e,i){"use strict";var a=i("aab4"),n=i.n(a);n.a},aab4:function(t,e,i){},b0b6:function(t,e,i){},b1e3:function(t,e,i){},b251:function(t,e,i){"use strict";var a=i("425b"),n=i.n(a);n.a},be97:function(t,e,i){t.exports=i.p+"img/collage.873f7c1e.png"},c169:function(t,e,i){"use strict";var a=i("d3ce"),n=i.n(a);n.a},cbca:function(t,e,i){},d3ce:function(t,e,i){},dc47:function(t,e,i){"use strict";var a=i("dee8"),n=i.n(a);n.a},dee8:function(t,e,i){},ec97:function(t,e,i){"use strict";var a=i("b1e3"),n=i.n(a);n.a}});
//# sourceMappingURL=app.28198dec.js.map